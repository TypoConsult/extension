<?php

defined('TYPO3_MODE') || die('Access denied.');

$extKey = '{{extensionNameSnake}}';
$table = 'tt_content';
$labelPrefix = "LLL:EXT:$extKey/Resources/Private/Language/locallang_db.xlf:$table";

$pluginName = '{{extensionNameClean}}_plugin';
$pluginIcon = "extensions-$pluginName";

// Inherit the look and feel of the text element so that we have header and bodytext
$GLOBALS['TCA'][$table]['types'][$pluginName] = $GLOBALS['TCA'][$table]['types']['text'];

// Add content typeicon_classes
$GLOBALS['TCA'][$table]['ctrl']['typeicon_classes'] = array_merge(
    $GLOBALS['TCA'][$table]['ctrl']['typeicon_classes'],
    [$pluginName => $pluginIcon]
);

// Tell TYPO3 about this plugin
\TYPO3\CMS\Extbase\Utility\ExtensionUtility::registerPlugin(
    '{{extensionNamePascal}}',
    'Plugin',
    "$labelPrefix.$pluginName.name",
    $pluginIcon
);
